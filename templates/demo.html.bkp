<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fathom Meeting Log</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; background-color: #f4f7f9; color: #333; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 20px auto; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        header { background-color: #4a90e2; color: white; padding: 20px 30px; border-top-left-radius: 8px; border-top-right-radius: 8px; }
        header h1 { margin: 0; font-size: 24px; }
        header p { margin: 5px 0 0; opacity: 0.9; }
        .content { padding: 30px; }
        .meeting { border-bottom: 1px solid #e0e6ed; padding-bottom: 25px; margin-bottom: 25px; }
        .meeting:last-child { border-bottom: none; margin-bottom: 0; }
        h2 { font-size: 20px; color: #1a202c; margin-top: 0; }
        p { margin-top: 0; }
        .meta { font-size: 12px; color: #718096; margin-bottom: 15px; }
        .attendees-list { list-style: none; padding: 0; margin: 10px 0 0; }
        .attendees-list li { display: inline-block; background-color: #edf2f7; color: #4a5568; padding: 4px 10px; border-radius: 12px; font-size: 13px; margin-right: 8px; margin-bottom: 8px; }
        .error { background-color: #ffebee; color: #c62828; border: 1px solid #c62828; padding: 15px; border-radius: 4px; margin-bottom: 20px; }
        .no-meetings { text-align: center; padding: 50px; color: #718096; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Fathom Meeting Log</h1>
            <p>Live feed of meetings processed by the integration server.</p>
        </header>
        <div class="content">
            {% if error %}
                <div class="error"><strong>Error:</strong> {{ error }}</div>
            {% endif %}

            {% if meetings %}
                {% for meeting in meetings %}
                <div class="meeting">
                    <div class="meta">Logged on: {{ meeting.logged_at }}</div>
                    <h2>{{ meeting.title }}</h2>
                    <p>{{ meeting.summary }}</p>
                    {% if meeting.attendees %}
                        <h4>Attendees Processed:</h4>
                        <ul class="attendees-list">
                            {% for attendee in meeting.attendees %}
                                <li>{{ attendee.name or 'N/A' }} ({{ attendee.email or 'No Email' }})</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
                {% endfor %}
            {% else %}
                <div class="no-meetings">
                    <h3>Waiting for the first webhook...</h3>
                    <p>Once you trigger a meeting summary in Fathom, it will appear here.</p>
                </div>
            {% endif %}
        </div>
    </div>
</body>
</html>
